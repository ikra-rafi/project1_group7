<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>Choose a cuisine:</h3>
    <select name="cuisines" id="cuisines">
        <option value="american">American</option>
        <option value="chinese">Chinese</option>
        <option value="italian">Italian</option>
        <option value="mexican">Mexican</option>
    </select>

    <h3>Choose ingredients (up to 3): </h3>
    <select name="ingredients" id="ingredients" >
        <option value="">-- Select --</option>
    </select>

    <button id="searchBtn">Search</button>

    <div id = "container">

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>

$(document).ready(function(){
    $('input[type="checkbox"]').click(function(){
        if($(this).is(":checked")){
            console.log($(this).id);
        }
        // else if($(this).is(":not(:checked)")){
        //     console.log("Checkbox is unchecked.");
        // }
    });
});
        //Spoonacular apiKey
        // var apiKey = "d2e56dceb3b5427994c61b93b6326f08" ;
        var apiKey = "214f60134dc9416a9544280f08aa9f0b";
        var cuisine;
        // var i = 0;
        var limit = 2;

        buildPage();

        function buildPage(){
            $.getJSON("assets\ingredients.json", function(data) {
            var $opt = $("<option>")
                .attr("value",data.Ingredient)
                .text(data.Ingredient);
            $('#ingredients').append($opt);
            });
        }

        function getResults(){


            cuisine = $("#cuisines option:selected" ).text();

            console.log(cuisine);

            var queryURL1 ="https://api.spoonacular.com/recipes/complexSearch?apiKey=" + apiKey + "&includeNutrition=true&cuisine="+ cuisine;

            $.ajax({
            url: queryURL1,
            method: "GET"
            }).then(function(response) {
                console.log("Spoonacular search by cuisine: " + cuisine);
        }

        $(searchBtn).on("click",function(event){
            // event.preventDefault() can be used to prevent an event's default behavior.
            // Here, it prevents the search button from trying to submit a form when clicked
            event.preventDefault();

            cuisine = $("#cuisines option:selected" ).text();

            console.log(cuisine);

            var queryURL1 ="https://api.spoonacular.com/recipes/complexSearch?apiKey=" + apiKey + "&includeNutrition=true&cuisine="+ cuisine;

            $.ajax({
            url: queryURL1,
            method: "GET"
            }).then(function(response) {
                console.log("Spoonacular search by cuisine: " + cuisine);
                console.log(response);

                for (i = 0; i < limit; i++){
                    var recipeId;
                    var recipe = $("<div>");
                        recipe.attr("class", recipeId);

                    var recipeTitle = $("<h2>");
                        recipeTitle.text(response.results[i].title);

                    var recipeImg = $("<img>");
                        recipeImg.attr("src", response.results[i].image);

                        $("#container").append(recipe);

                        $(recipe).append(recipeTitle);

                        $(recipe).append(recipeImg);

                    recipeId = response.results[i].id;

                    console.log(recipeId);

                    var time = $("<p>");
                        time.attr("class", recipeId);
                        $(recipe).append(time);

                    var queryURL2 = "https://api.spoonacular.com/recipes/" + recipeId + "/information" + "/?apiKey=" + apiKey;

                    $.ajax({
                        url: queryURL2,
                        method: "GET"
                        }).then(function(response) {
                            // console.log("Spoonacular search by cuisine: " + cuisine);
                            console.log(response);
                            time = "Ready in: " + response.readyInMinutes + " minutes";
                            console.log(time + " id: " + response.id);
                            $("time[class == 'response.id']").text(response.readyInMinutes);
                        });
                }

            }); //end of onclick function

        });

        // //Spoonacular API: https://spoonacular.com/food-api
        // //search by ingredients:
        // var queryURL = "https://api.spoonacular.com/recipes/findByIngredients?apiKey=" + apiKey + "&ingredients=rice,+shrimp,+sugar,+onions";
        // $.ajax({
        //   url: queryURL,
        //   method: "GET"
        // }).then(function(response) {
        //     console.log("Spoonacular search by ingredients:");
        //     console.log(response);
        // });

        // //search by cuisine:
        // var queryURL2 ="https://api.spoonacular.com/recipes/complexSearch?apiKey=" + apiKey + "&includeNutrition=true&cuisine="+ cuisine;
        // $.ajax({
        //   url: queryURL2,
        //   method: "GET"
        // }).then(function(response) {
        //     console.log("Spoonacular search by cuisine: " + cuisine);
        //     console.log(response);
        //     console.log("id of first result: " + response.results[0].id);
        //     var id = response.results[0].id; //Get id of first object in response array
        //     //build URL with id to pull in similarResults
        //     queryURL3 = "https://api.spoonacular.com/recipes/" + id + "/similar?apiKey=" + apiKey;
        //     similarResults(queryURL3); //pass similar results url (queryURL3) to similarResults() function
        // });

        // function similarResults(url){
        //   $.ajax({
        //   url: url,
        //   method: "GET"
        // }).then(function(response) {
        //     console.log("Spoontacular recipe similar to  results: ");
        //     console.log(response);
        // });
        // }



    </script>
</body>
</html>